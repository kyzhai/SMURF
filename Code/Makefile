all: ast parser scanner test

test: parser.cmo scanner.cmo ast.cmo test.cmo
	ocamlc -o test $^

test.cmo: test.ml ast.ml
	ocamlc -c test.ml

scanner.ml: scanner.mll
	ocamllex scanner.mll

ast: ast.ml
	ocamlc -c ast.ml

parser.ml parser.mli:  parser.mly
	ocamlyacc -v parser.mly

parser: parser.mli parser.ml ast
	ocamlc -c parser.mli parser.ml

scanner: scanner.ml
	ocamlc -c scanner.ml

clean:
	rm *.cmi *.cmo parser.ml scanner.ml *.output parser.mli test

# Generated by ocamldep
ast.cmo :
ast.cmx :
parser.cmo : ast.cmo parser.cmi
parser.cmx : ast.cmx parser.cmi
parser.cmi : ast.cmo
scanner.cmo : parser.cmi
scanner.cmx : parser.cmx
test.cmo : scanner.cmo parser.cmi ast.cmo
test.cmx : scanner.cmx parser.cmx ast.cmx

